SET SEARCH_PATH TO 'public';

CREATE TYPE TRANSACTION_TYPE AS ENUM ('deposit', 'withdraw');

-- CREATE EXTENSION postgis;

DROP TABLE IF EXISTS wallets;

CREATE TABLE wallets(
	ownerid VARCHAR(255) NOT NULL,
	address VARCHAR(255) NOT NULL,
	privatekey VARCHAR(255) NOT NULL,
	creationdate DATE NOT NULL DEFAULT CURRENT_TIMESTAMP
);

ALTER TABLE wallets ADD CONSTRAINT pk_wallets PRIMARY KEY(ownerid);

DROP TABLE IF EXISTS projects;

CREATE TABLE projects(
  projectid INTEGER PRIMARY KEY,
  ownerid VARCHAR(255) NOT NULL,
  smcid INTEGER NOT NULL
);

ALTER TABLE projects ADD CONSTRAINT fk_projects FOREIGN KEY(ownerid) REFERENCES wallets(ownerid) ON DELETE CASCADE;

-- entrepreneur wallet
INSERT INTO wallets VALUES ('f8MPMhialjZCCB2yUMZjCPG5yTs1', '0xc954A319011f7b261b41e799D6AaB17EEc7a7DB8', '0x26999158e88c6853b13c5db9403f855ecfe517bb9c093e4b5682c0f9783ffca3', '2021-06-29');

-- sponsor wallet
INSERT INTO wallets VALUES ('qDzHIJjwNqSm8HEN308LeQXHnbq2', '0x935E13d6e744Da2F7F84D4348299367d6Cce00d8', '0x48bc56a0196d9090a6fae0fd426531da067879c1e4b452f0b97354b73562b942', '2021-06-30');